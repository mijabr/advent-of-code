using AdventOfCode.Util;

namespace AdventOfCodeTests.Year2022
{
    public class Day23Tests
    {
        [Test]
        public void UnstableDiffusion_CanInitialise()
        {
            var unstableDiffusion = new UnstableDiffusion(_exampleInput1);

            unstableDiffusion.ElvesMap.ToString().Should().Be(
@"....
..##
..#.
....
..##
");
        }

        [Test]
        public void Test_ShouldMoveTheElvesForExample1()
        {
            var unstableDiffusion = new UnstableDiffusion(_exampleInput1);

            unstableDiffusion.SpreadOut(1);

            unstableDiffusion.ElvesMap.ToString().Should().Be(
@"..##
....
..#.
...#
..#.
");
        }

        [Test]
        public void Test_ShouldMoveTheElvesAgainForExample1()
        {
            var unstableDiffusion = new UnstableDiffusion(_exampleInput1);

            unstableDiffusion.SpreadOut(2);

            unstableDiffusion.ElvesMap.ToString().Should().Be(
@".....
..##.
.#...
....#
.....
..#..
");
        }

        [Test]
        public void Test_ShouldFindThePuzzleAnswerForExample1()
        {
            var unstableDiffusion = new UnstableDiffusion(_exampleInput1);

            unstableDiffusion.SpreadOut();

            unstableDiffusion.EmptySpaces.Should().Be(25);
        }

        [Test]
        public void Test_ShouldFindThePuzzleAnswerForPart1()
        {
            var unstableDiffusion = new UnstableDiffusion(_puzzleInput);

            unstableDiffusion.SpreadOut();

            unstableDiffusion.EmptySpaces.Should().Be(4249);
        }

        [Test]
        public void Test_ShouldFindThePuzzleAnswerForExample1_Part2()
        {
            var unstableDiffusion = new UnstableDiffusion(_exampleInput2);

            var moves = unstableDiffusion.SpreadOut(-1);

            moves.Should().Be(20);
        }

        //[Test]
        public void TEST1_ShouldFindThePuzzleAnswerForPart2()
        {
            var unstableDiffusion = new UnstableDiffusion(_puzzleInput);

            var moves = unstableDiffusion.SpreadOut(-1);

            moves.Should().Be(980);
        }

        private const string _exampleInput1 = ".....\r\n..##.\r\n..#..\r\n.....\r\n..##.\r\n.....";
        private const string _exampleInput2 = "..............\r\n..............\r\n.......#......\r\n.....###.#....\r\n...#...#.#....\r\n....#...##....\r\n...#.###......\r\n...##.#.##....\r\n....#..#......\r\n..............\r\n..............\r\n..............";
        private const string _puzzleInput = "#.##.....#.#...###.##.##.##.##...##..####.#.#.##..#.#####......###..###.###\r\n#.#....#.##..#.#..#...#####.####....#.#...#...#.####.###.#.#.#..#.####.##..\r\n##.####..#.##.....##...#.#.#.#...###.#..#####..##.........#...###..#..#..##\r\n.#..###..#...#.####..#.#.#.####....###.##....#.##...........#..###...###.##\r\n#.###...##.#....###..####..#.....#######..###.####.#...#...##.#..##.###.###\r\n#.#.###..#...#.##...##.##.##.#.....##..##.##...####.######.#.#.#...#####..#\r\n.#..###....##......#####.#.###..#..##..##.#.######..###..#....#.####.######\r\n#...###..####..#.....#.####.#.##...#..#..###..###...#....##..#..#####.....#\r\n#.#####.#..#..#..####.##.#....###..##..###...###.##.#.#.##.#.#..##.#.#####.\r\n###.#.#.##....##.....#..#..#.####.#....#...#.####.#.#.....#.###..####..##.#\r\n.##.#...###.###..#.#..##.###.##....#.#....#####....#.#.###.###.#...#.......\r\n...####.####....#.....######.###.###...###.#...##...###..###..###.##.#.##.#\r\n#.#..#.####.###..##...###.#..######...##.#####.........###..###...#.#.#.###\r\n##..####...###.##..###.###..#...##..##...###.#......####.#.#...#..#.####..#\r\n.#...#.#..#.#.####.#.#.###..###..#.#..#....######..#...##.##.....##..#.#..#\r\n......###..#.....##.###.##...#.###.####..#####.###.#.###....####.#...##..#.\r\n..#.###..###....#....#...#.#..#.#.##.#.#.#.####.##..####.##..##......##.###\r\n#...#..####.#.#...##..#.#..#.####.##.###.##.##.##.#...#.#.##...##.#..#.#.##\r\n##....#..#......#....#.####...#..##..##.###...##..####.##...#.#############\r\n###.#....#..#.##...#.##..###..#....#.#..#..#..#...#...####.#.###.##.#..##.#\r\n....##..#.##..###.#.#.##..##..#.#..#...##.##.###....#.#.#.#....####....#...\r\n##.##.#.#...##...#..####.#.###....####.#.#........#..#.#####..##....##.###.\r\n#.#.##.#.....#..##.##.#..#....#...#..##..#####.####.##...##......###...#...\r\n.#.####...#.##..##.##.######.#...##.#..##.##..#.##....##..#.##...#.#####.#.\r\n#...#..#..#.#..##.#.##.#..###.##...##..#.##..#.#..##...#.##.###...###..#.#.\r\n#..##.....##.###.#..#.#.#######.###.#....#...#.#.####...##.#.#..##.#.#####.\r\n#.......#..##..#.###.....#....###.#.###.##...##.##.###.#..##.###....#..#...\r\n#.....#########.#.#..#.#.#.#..###.......#..#..#...##.#.#.####..#.##.#####..\r\n#...#.#....#####.#.#..#..#...##.#.###....##.##.#....###.#.###.....#..#.##.#\r\n#...#..##....#.##.##.##.##..###.#......#..###.###..##.####.##...#..###.####\r\n####..#.#...###....#......###.####..#.##......#.....#.....#..#.##..###..##.\r\n..##.##.##.########.#.####..#..#.#..#.###....###.#..#...#.##.##.#...#.#.###\r\n....#.....####.######.#.#..#.#.##.#.#..#..#.#..#.#.###.#.#..#####..##.##.#.\r\n.#...##..#..#########..#....#....#.#...#..#.#.#.#.######.#.##....#..#..#..#\r\n.###.#.##...##..#.##.#..#...###.##.###.####.....#..#..###...#.#.#....#.##..\r\n##.##..#####.##..###.##.##.#.#.#..#.#.####.#.#.##....#.####..#..##.##...##.\r\n#####...########..##...###.##..#..####.#.#.##.#.#..##....#..####.#.#.#..##.\r\n.#..#.#.##....#..###..###...####...###......#.#.#..#.##.####.#######.......\r\n###...#..##...#.#.#.#.##...#....####.#...#..#....##.##.#.##..#..##.#...##..\r\n..##...##.#.#.###...##.......#.#.###..##..#.##.#.#.###...####.#.#.#.##.#.#.\r\n##...#...#.###.#.##.#.#....#.##..#..#...#..##.#..#..##..#.#.#.#.#..#..####.\r\n####..##..#.#.#.#####..#......##.#....#..####..#.#.#####.#.....#..#...##...\r\n#..#.#.#.####...##..#..###.#.#...#.#.#.#..###....##.#.#....#..######.###.##\r\n#.###.#....#.#.#.#.###...#...###..#.#.#..#........#...#.##.####..#.#.#..#.#\r\n.###...####.##.#....##.###..##.###.#.#.....#...#.#..#..#...#.#####.#...#...\r\n......#....#.####..#.#.#..#..##.###...#..###.####.#.###..###.#....##.###.#.\r\n....###..##.#..#.###.#..#.#.#.####..#####..#.#.###..#.....##.#......#..##.#\r\n.#...#....#.##.......#.#..#####.#.#######.........###.#.###.#...###..#####.\r\n.#....#.#......#.###....#..##..####........#.#..#.#.#.##.#.#..##.#..#..#.#.\r\n.##.###.##.#.#.#....##..#.###...#...#.##..#.#..#..#....###..#...#.##.#...##\r\n###.....##.###.####.#...#####......#..###..#...###..#...##.##..###.....#...\r\n####......###.#...#..##.##.#..###.#.####.#.##..####...#.#...#....#..#..#...\r\n.###.###.#..#...#..###.#####...###.#####....#.....#...##.##..#..##..#...#.#\r\n.##.#.####..###.#.#.##.##.#####..##...#########.#..#########..#.#..###..#.#\r\n.####.#..#.###.#########..#..#.###.#...#.#.#.##...###...#.#.#..###.#.#....#\r\n##.########...#..#.....#..###..#...##....#.#.#..........#..###...####..#.##\r\n####.#####...###..#..##..###.#.#..#..###.####.#.####.###..#...#.##.#..#.###\r\n#..#.#.#.#..###.#.....##.#....#####..#.#..#...#.##.#....##.##.#..#.###.###.\r\n.###....#.#######.######...##......#....#..##.##.....#..#....#..#.#.....#..\r\n#####..#.#.##..###..##.#.#.##..####.#..#.#..#####.#....##.##..#..##..###..#\r\n..#.#..##.#.##.#..#.#.#.#.#.##.##...#...#....##..##.##...#........##.#####.\r\n##.#..######.#.......#.##..#.###.######..######.#.#.##..#####.#.####.#.#...\r\n.##.#####.##.#.#.##....##...#####.#...##......#.#..#..#..#.##......#.##..##\r\n..##..#.####..#.###..#....##.##..#..#####.#.#.#...#....#.###.###..##.##...#\r\n......#.##.....#.####....#....#...###....#..######...#.#...###..#####.##...\r\n#.#...##..##.#.#..###.#....#.#..#..#....####..#..##.##.#..#.#...###..#..###\r\n.#.#.##..#####..##.###..#...##..##.#.#.######.#...#.#.##..#.....#....#.###.\r\n#..###.####.###..#.##.......#.#..###..#.###.##.##..#.......#...#.#..###..#.\r\n...#......####.##.#.##..#.#.#.#.#####.#.##.##..##.##.###.....#.#####.#..#..\r\n.##..#.##..#.####...#...#####.#.###..#.##.##.....###...##..#...#....#.###.#\r\n.##.##.#######.###.###......#.#.###.##..#.##.######.##.#.....###..##..#####\r\n#######.#..#..#..#.#.#..##..#..#.#.#.##......#.##.####.#.###.#..#...##.####\r\n.##.#..#...........#.#..#.##.###....#..#....#..##.####.######.......#.#.###\r\n.##...###.####.###.#.###.#..#.#.#.##..#.##.###.#.#.##..##..#.##.#.......###\r\n##.#.#......##.#.#.##.###....#.###..#.###.#...##...#####.#..#..#.####...#..";
    }
}

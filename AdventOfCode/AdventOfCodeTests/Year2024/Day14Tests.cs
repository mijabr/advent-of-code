using AdventOfCode.Year2024;

namespace AdventOfCodeTests.Year2024
{
    public class Day14Tests
    {
        [Test]
        public void ToiletRobotPredictor_CanReadInput()
        {
            var calculator = new ToiletRobotPredictor(_puzzleTestInput);

            calculator.Robots[0].X.Should().Be(0);
            calculator.Robots[0].Y.Should().Be(4);
            calculator.Robots[0].VX.Should().Be(3);
            calculator.Robots[0].VY.Should().Be(-3);
        }

        [Test]
        public void ToiletRobotPredictor_FindSafetyFactor_ShouldSolveTestInput()
        {
            new ToiletRobotPredictor(_puzzleTestInput).FindSafetyFactor(11, 7, 100).Should().Be(12);
        }

        [Test]
        public void ToiletRobotPredictor_FindSafetyFactor_ShouldSolveInput()
        {
            new ToiletRobotPredictor(_puzzleInput).FindSafetyFactor(101, 103, 100).Should().Be(228410028);
        }

        [Test]
        [Ignore("Find the image in output")]
        public void ToiletRobotPredictor_FindSafetyFactor_ShouldPrintOutputToFile()
        {
            new ToiletRobotPredictor(_puzzleInput).FindSafetyFactor(101, 103, 10000, true);
        }
        // converging iteration distance between flat looking mess and vertical looking mess
        // 17f, 120f, 223f, 326f, 429f, 532f, 635f, 738f, 841f, 944f, 2901f, 3004f, 3107f, 3210f, 3313f, 5786f, 7638f, 8257f
        // 76v, 177v, 278v, 379v, 480v, 581v, 682v, 783v, 884v, 985v, 2904v, 3005v, 3106v, 3206v, 3308v, 5833v, 7651v, 8257v
        // 59,  57,   55,   53,   51,   49,                   , 41,   3,     1,     -1,  , -4   , -5,    47,    13,    0!!! 8258 seconds is it
        private const string _puzzleTestInput = "p=0,4 v=3,-3\r\np=6,3 v=-1,-3\r\np=10,3 v=-1,2\r\np=2,0 v=2,-1\r\np=0,0 v=1,3\r\np=3,0 v=-2,-2\r\np=7,6 v=-1,-3\r\np=3,0 v=-1,-2\r\np=9,3 v=2,3\r\np=7,3 v=-1,2\r\np=2,4 v=2,-3\r\np=9,5 v=-3,-3";

        private const string _puzzleInput =
"p=7,85 v=-65,-36\r\np=4,17 v=-37,-76\r\np=60,71 v=-8,-19\r\np=82,99 v=20,-59\r\np=56,11 v=50,-21\r\np=20,25 v=66,12\r\np=57,97 v=-67,-20\r\np=89,37 v=10,52\r\np=32,51 v=46,56\r\np=72,40 v=26,-80\r\np=65,23 v=1,91\r\np=74,9 v=-37,46\r\np=44,72 v=-89,96\r\np=49,34 v=67,1\r\np=16,83 v=11,-47\r\np=56,90 v=42,78\r\np=42,37 v=71,-34\r\np=64,16 v=-33,-50\r\np=70,21 v=-42,-90\r\np=31,81 v=20,-94\r\np=32,8 v=-5,-38\r\np=100,10 v=44,64\r\np=24,93 v=-90,63\r\np=45,20 v=-3,-31\r\np=13,18 v=-65,30\r\np=61,26 v=59,-79\r\np=30,67 v=-25,39\r\np=57,13 v=13,25\r\np=56,27 v=-38,-55\r\np=68,9 v=-92,-32\r\np=81,34 v=-54,97\r\np=65,40 v=-4,87\r\np=7,87 v=-10,-2\r\np=48,78 v=-8,-59\r\np=52,62 v=-17,-98\r\np=75,6 v=-79,-32\r\np=6,53 v=-82,-44\r\np=45,28 v=37,90\r\np=53,10 v=88,-77\r\np=21,35 v=-62,-36\r\np=25,61 v=12,44\r\np=23,96 v=54,1\r\np=76,43 v=-6,-35\r\np=20,47 v=-2,22\r\np=82,15 v=-83,47\r\np=45,71 v=-19,-11\r\np=87,35 v=-45,-68\r\np=81,101 v=14,-26\r\np=58,42 v=17,58\r\np=71,78 v=-9,-22\r\np=30,97 v=20,43\r\np=49,91 v=-13,-54\r\np=27,86 v=45,-42\r\np=26,0 v=45,-32\r\np=22,92 v=41,-48\r\np=95,11 v=22,-52\r\np=79,47 v=81,17\r\np=74,74 v=-46,5\r\np=65,100 v=21,-73\r\np=4,72 v=-6,73\r\np=24,43 v=-18,-51\r\np=56,58 v=53,-39\r\np=62,27 v=-12,70\r\np=43,77 v=-81,33\r\np=11,15 v=-6,29\r\np=60,7 v=59,71\r\np=86,79 v=94,55\r\np=57,29 v=-7,-6\r\np=62,39 v=-33,14\r\np=28,5 v=-77,26\r\np=5,49 v=-67,-5\r\np=10,33 v=-48,1\r\np=69,4 v=89,82\r\np=98,95 v=33,23\r\np=4,27 v=48,-71\r\np=3,24 v=-78,-38\r\np=54,2 v=68,20\r\np=69,14 v=30,59\r\np=39,29 v=92,-16\r\np=45,77 v=-55,-53\r\np=98,70 v=82,27\r\np=8,76 v=-4,-93\r\np=26,39 v=36,-6\r\np=96,88 v=-95,49\r\np=24,48 v=58,-97\r\np=71,67 v=-73,-16\r\np=50,89 v=67,9\r\np=93,3 v=-49,-89\r\np=4,24 v=-94,-44\r\np=28,16 v=45,-50\r\np=64,36 v=72,81\r\np=0,40 v=-10,-46\r\np=89,54 v=10,-30\r\np=16,99 v=78,-22\r\np=95,32 v=69,35\r\np=82,72 v=-42,-85\r\np=60,96 v=-88,-42\r\np=49,52 v=-76,-58\r\np=40,8 v=-30,-90\r\np=28,32 v=70,-27\r\np=93,14 v=12,-85\r\np=80,26 v=-7,-73\r\np=85,74 v=-49,-70\r\np=75,66 v=5,73\r\np=76,30 v=39,-85\r\np=35,32 v=46,17\r\np=89,36 v=72,-23\r\np=89,33 v=-61,52\r\np=8,4 v=74,71\r\np=92,102 v=-82,95\r\np=66,50 v=35,97\r\np=78,63 v=-61,-60\r\np=42,98 v=-39,39\r\np=39,83 v=-64,61\r\np=51,30 v=30,75\r\np=44,29 v=25,47\r\np=87,89 v=24,71\r\np=89,12 v=-87,-44\r\np=32,60 v=79,-24\r\np=96,21 v=31,-67\r\np=27,24 v=58,24\r\np=1,84 v=-23,-7\r\np=18,67 v=-35,79\r\np=35,51 v=71,97\r\np=54,51 v=-42,57\r\np=0,52 v=-87,80\r\np=20,79 v=-33,-85\r\np=89,101 v=-28,-95\r\np=70,22 v=-10,-56\r\np=57,22 v=29,-22\r\np=87,94 v=-21,35\r\np=80,15 v=95,32\r\np=70,89 v=-18,30\r\np=15,99 v=95,83\r\np=60,56 v=55,6\r\np=92,66 v=-91,-99\r\np=53,82 v=89,-65\r\np=20,100 v=24,-60\r\np=56,58 v=-67,97\r\np=7,79 v=2,-13\r\np=29,23 v=-47,30\r\np=94,26 v=94,87\r\np=42,22 v=-46,86\r\np=46,44 v=78,75\r\np=83,6 v=43,-32\r\np=84,2 v=-44,-89\r\np=22,82 v=-1,-39\r\np=49,80 v=-4,-13\r\np=77,93 v=-83,43\r\np=35,82 v=-89,-71\r\np=24,7 v=24,-32\r\np=98,64 v=13,-32\r\np=40,75 v=59,73\r\np=41,30 v=-5,-56\r\np=39,102 v=-73,25\r\np=31,40 v=58,-57\r\np=95,96 v=-58,18\r\np=51,64 v=-36,3\r\np=74,3 v=-63,7\r\np=16,67 v=66,-24\r\np=69,54 v=-96,91\r\np=17,62 v=-72,-64\r\np=9,57 v=3,-1\r\np=82,86 v=63,-81\r\np=37,24 v=21,-50\r\np=35,76 v=-29,-49\r\np=41,4 v=69,23\r\np=47,71 v=-88,32\r\np=97,51 v=65,-12\r\np=9,29 v=36,-33\r\np=19,101 v=66,20\r\np=18,19 v=-34,48\r\np=45,99 v=73,15\r\np=24,25 v=92,35\r\np=43,83 v=97,66\r\np=22,16 v=-73,-38\r\np=31,82 v=-5,60\r\np=67,3 v=78,-29\r\np=45,69 v=59,22\r\np=99,101 v=-82,66\r\np=96,88 v=-6,15\r\np=27,62 v=-56,51\r\np=80,78 v=-62,-99\r\np=76,88 v=-67,-26\r\np=74,15 v=64,53\r\np=77,25 v=37,-83\r\np=55,47 v=-30,-57\r\np=0,54 v=-32,-30\r\np=46,43 v=58,-12\r\np=66,66 v=-93,-97\r\np=5,14 v=-23,-10\r\np=60,3 v=-89,-30\r\np=69,38 v=9,-28\r\np=69,12 v=-25,-62\r\np=69,98 v=-8,83\r\np=59,32 v=-13,35\r\np=15,12 v=41,-62\r\np=32,71 v=-25,7\r\np=93,100 v=-49,-3\r\np=63,25 v=-20,-67\r\np=36,28 v=37,-56\r\np=44,54 v=46,-98\r\np=22,99 v=24,-95\r\np=33,8 v=-73,-78\r\np=10,68 v=74,10\r\np=84,92 v=74,70\r\np=76,9 v=34,-21\r\np=17,3 v=12,-51\r\np=76,1 v=77,72\r\np=89,76 v=-73,-23\r\np=74,94 v=64,-3\r\np=18,49 v=-14,68\r\np=40,90 v=-9,-48\r\np=60,47 v=47,58\r\np=9,37 v=-27,-28\r\np=66,84 v=72,66\r\np=11,57 v=62,-17\r\np=95,64 v=15,-69\r\np=55,8 v=46,94\r\np=8,92 v=-99,-24\r\np=63,36 v=-97,-29\r\np=38,24 v=46,-99\r\np=2,39 v=-82,63\r\np=66,45 v=5,29\r\np=34,9 v=64,-9\r\np=24,35 v=-56,81\r\np=24,90 v=-90,38\r\np=94,22 v=-86,78\r\np=98,55 v=15,69\r\np=23,40 v=-94,92\r\np=51,10 v=-11,-85\r\np=13,54 v=11,-30\r\np=6,37 v=-61,-40\r\np=0,71 v=-74,-71\r\np=79,32 v=-75,24\r\np=15,10 v=-35,-83\r\np=100,96 v=-57,32\r\np=6,65 v=-45,54\r\np=20,73 v=-56,10\r\np=4,102 v=41,63\r\np=17,19 v=-91,68\r\np=73,58 v=-79,91\r\np=96,57 v=-40,74\r\np=20,22 v=-9,-27\r\np=56,73 v=32,84\r\np=22,11 v=-56,-61\r\np=21,19 v=54,-68\r\np=81,24 v=-79,93\r\np=52,25 v=14,71\r\np=37,15 v=96,-45\r\np=13,31 v=41,-67\r\np=58,90 v=72,-94\r\np=90,4 v=10,-3\r\np=93,86 v=81,20\r\np=65,85 v=-8,-19\r\np=93,23 v=31,-50\r\np=26,87 v=42,21\r\np=73,1 v=31,-84\r\np=94,52 v=-40,-51\r\np=52,79 v=10,-46\r\np=52,81 v=63,32\r\np=85,18 v=-78,-21\r\np=40,1 v=12,-95\r\np=82,54 v=-36,-22\r\np=77,70 v=-71,-21\r\np=1,32 v=-66,-63\r\np=45,3 v=-68,-66\r\np=78,99 v=35,-84\r\np=13,18 v=-57,87\r\np=89,69 v=94,90\r\np=5,35 v=-19,-34\r\np=98,14 v=53,-84\r\np=52,78 v=38,10\r\np=84,47 v=-83,58\r\np=75,86 v=-79,-42\r\np=71,0 v=5,-71\r\np=30,87 v=62,-71\r\np=43,57 v=4,51\r\np=19,18 v=83,75\r\np=26,86 v=-77,-34\r\np=45,4 v=79,59\r\np=61,3 v=-7,86\r\np=96,77 v=-45,-37\r\np=86,26 v=-65,83\r\np=26,39 v=-77,35\r\np=9,10 v=-23,25\r\np=40,83 v=-8,48\r\np=44,10 v=-82,-66\r\np=20,84 v=-51,-93\r\np=42,67 v=71,78\r\np=40,21 v=-89,76\r\np=87,29 v=-63,75\r\np=90,82 v=32,56\r\np=30,18 v=79,-78\r\np=79,72 v=-62,-82\r\np=29,85 v=-18,26\r\np=49,48 v=-97,-86\r\np=29,27 v=-81,98\r\np=45,68 v=-72,22\r\np=67,34 v=-38,77\r\np=12,27 v=91,58\r\np=67,33 v=76,-79\r\np=81,38 v=-95,-97\r\np=70,3 v=-42,-20\r\np=45,42 v=-34,-17\r\np=98,70 v=27,73\r\np=26,33 v=24,12\r\np=71,21 v=-75,-84\r\np=16,84 v=7,95\r\np=86,93 v=-71,-69\r\np=28,72 v=-42,-90\r\np=87,90 v=-96,60\r\np=3,74 v=78,5\r\np=21,65 v=83,96\r\np=6,9 v=-49,45\r\np=43,11 v=-40,-42\r\np=77,14 v=21,43\r\np=44,61 v=-18,-4\r\np=80,19 v=-96,-32\r\np=13,84 v=20,50\r\np=23,2 v=70,-66\r\np=35,68 v=96,-47\r\np=51,34 v=59,-50\r\np=2,58 v=73,-12\r\np=30,26 v=-26,-22\r\np=79,57 v=70,50\r\np=33,46 v=-5,-63\r\np=99,91 v=-28,67\r\np=26,35 v=71,-78\r\np=80,93 v=-45,32\r\np=14,39 v=-91,-77\r\np=38,93 v=46,-15\r\np=20,93 v=-98,-14\r\np=98,12 v=-52,92\r\np=21,42 v=24,-91\r\np=14,9 v=70,-67\r\np=100,14 v=2,76\r\np=49,76 v=4,27\r\np=20,29 v=32,70\r\np=61,24 v=-88,24\r\np=45,85 v=-46,-65\r\np=59,28 v=9,30\r\np=2,62 v=-69,-63\r\np=77,17 v=-79,25\r\np=7,37 v=2,-92\r\np=93,44 v=91,-67\r\np=96,15 v=62,-76\r\np=62,29 v=8,-94\r\np=34,13 v=49,-21\r\np=93,60 v=-32,-93\r\np=92,42 v=78,68\r\np=9,72 v=91,27\r\np=32,86 v=58,72\r\np=48,19 v=-97,76\r\np=4,73 v=7,68\r\np=84,26 v=98,64\r\np=72,9 v=-79,-79\r\np=12,21 v=91,-4\r\np=37,74 v=16,-7\r\np=2,37 v=-61,-63\r\np=69,83 v=-27,-89\r\np=86,64 v=-32,68\r\np=9,16 v=-98,81\r\np=39,8 v=-4,-34\r\np=41,46 v=43,-8\r\np=16,9 v=-19,99\r\np=82,4 v=-45,48\r\np=81,95 v=18,54\r\np=11,75 v=86,62\r\np=60,86 v=25,14\r\np=63,54 v=89,-30\r\np=43,68 v=50,-18\r\np=51,17 v=-42,-16\r\np=85,70 v=52,16\r\np=20,91 v=-27,-36\r\np=78,36 v=-79,12\r\np=83,80 v=-3,-13\r\np=31,10 v=75,-78\r\np=42,2 v=41,-94\r\np=10,1 v=64,57\r\np=59,33 v=18,14\r\np=10,60 v=63,-69\r\np=92,47 v=65,-17\r\np=52,55 v=4,28\r\np=33,59 v=-73,33\r\np=46,70 v=33,-8\r\np=48,33 v=77,14\r\np=80,51 v=73,63\r\np=5,40 v=-6,-91\r\np=5,45 v=43,-92\r\np=66,24 v=-50,-33\r\np=10,36 v=-97,28\r\np=0,84 v=14,38\r\np=14,88 v=-40,-58\r\np=90,23 v=-43,-73\r\np=16,75 v=-73,-59\r\np=36,16 v=39,-43\r\np=45,51 v=79,-87\r\np=67,96 v=55,34\r\np=55,12 v=-42,-95\r\np=84,13 v=39,36\r\np=95,52 v=11,92\r\np=68,82 v=99,-19\r\np=36,102 v=75,-38\r\np=39,45 v=-85,-74\r\np=98,4 v=24,74\r\np=2,40 v=40,52\r\np=0,38 v=-78,53\r\np=4,34 v=27,-50\r\np=43,89 v=-93,55\r\np=21,78 v=78,-1\r\np=64,63 v=-25,21\r\np=12,63 v=-60,-46\r\np=83,3 v=-11,32\r\np=97,71 v=10,16\r\np=39,83 v=-20,10\r\np=9,27 v=-74,-67\r\np=84,25 v=75,-31\r\np=30,100 v=-64,8\r\np=37,96 v=21,32\r\np=1,66 v=78,62\r\np=93,75 v=-99,-58\r\np=75,99 v=-66,-84\r\np=57,49 v=87,28\r\np=53,28 v=73,-89\r\np=4,76 v=-44,96\r\np=38,95 v=-71,-66\r\np=48,73 v=-76,-59\r\np=3,40 v=-61,-23\r\np=98,91 v=-99,32\r\np=47,81 v=59,-19\r\np=40,95 v=71,-94\r\np=93,63 v=81,28\r\np=35,36 v=37,46\r\np=98,73 v=63,90\r\np=28,3 v=94,-15\r\np=43,96 v=20,38\r\np=42,70 v=-72,27\r\np=66,26 v=-33,-22\r\np=59,4 v=34,-3\r\np=68,91 v=67,-86\r\np=87,71 v=5,-41\r\np=43,45 v=62,79\r\np=79,86 v=-77,-96\r\np=39,22 v=54,-79\r\np=99,67 v=14,34\r\np=62,29 v=93,-62\r\np=85,99 v=35,-94\r\np=15,57 v=53,-46\r\np=35,43 v=-26,-58\r\np=23,66 v=66,-1\r\np=76,47 v=34,34\r\np=84,54 v=14,54\r\np=29,92 v=60,97\r\np=72,12 v=-84,36\r\np=6,65 v=-48,-81\r\np=43,24 v=-89,1\r\np=95,25 v=24,-78\r\np=34,86 v=7,67\r\np=90,5 v=-11,99\r\np=63,4 v=-60,99\r\np=17,45 v=-65,92\r\np=59,75 v=-37,-8\r\np=63,59 v=81,85\r\np=12,85 v=34,-83\r\np=45,48 v=84,26\r\np=29,5 v=12,70\r\np=57,94 v=-97,93\r\np=29,50 v=22,-57\r\np=57,3 v=50,-58\r\np=90,33 v=90,52\r\np=78,82 v=36,60\r\np=4,64 v=44,17\r\np=43,34 v=63,98\r\np=87,69 v=-13,-62\r\np=10,66 v=-15,38\r\np=21,70 v=7,84\r\np=65,52 v=-71,-80\r\np=3,76 v=-2,10\r\np=42,25 v=-19,59\r\np=20,100 v=-32,-84\r\np=44,0 v=-34,26\r\np=4,26 v=2,-17\r\np=84,17 v=-32,2\r\np=32,62 v=-26,73\r\np=21,66 v=-94,-44\r\np=51,54 v=-59,85\r\np=18,91 v=53,78\r\np=39,55 v=80,62\r\np=53,48 v=38,-86\r\np=79,84 v=-66,-2\r\np=33,24 v=4,-51\r\np=54,76 v=-17,27\r\np=15,55 v=-86,-29\r\np=26,64 v=50,-70\r\np=87,53 v=17,6\r\np=90,71 v=14,-70\r\np=42,74 v=-72,15\r\np=70,100 v=68,-88\r\np=25,98 v=-1,49";
    }
}
